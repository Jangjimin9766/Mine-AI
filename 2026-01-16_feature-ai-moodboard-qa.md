# 🧠 오늘의 백엔드 성장 포인트 (2026-01-16)

**브랜치**: `feature/ai-moodboard-qa`

## 1. "시스템의 가용 자원을 먼저 확인하라" (CPU vs GPU)
- **파일**: `local_diffusion_client.py`
- **상황**: GPU가 없는 환경에서 GPU 전용 코드(`float16`)를 돌려 에러가 발생.
- **해결**: `dtype = torch.float32 if device == "cpu" else torch.float16`
- **뇌리 박기**: 백엔드는 내가 짠 코드가 어떤 하드웨어 위에서 돌아가는지 항상 의식해야 합니다.

## 2. "네트워크 전송량(다운로드)은 최소화하라"
- **파일**: `local_diffusion_client.py`
- **상황**: CPU 환경이라고 해서 10GB짜리 모델을 새로 받으려다 시간이 너무 오래 걸림.
- **해결**: `variant="fp16"`으로 고정해 이미 받은 5GB 파일을 쓰고, 메모리에서만 `float32`로 변환.
- **뇌리 박기**: 무식하게 다 새로 받는 대신, **이미 있는 자원을 재활용(variant 고정)**하여 인프라 비용과 시간을 아끼는 것이 백엔드 엔지니어의 실력입니다.

## 3. "라이브러리의 기본값보다 내 환경의 목록이 우선이다"
- **파일**: `llm_client.py`
- **상황**: 공식 명칭인 `gemini-1.5-flash`가 404(Not Found) 에러를 냄.
- **해결**: `genai.list_models()`로 내 API 키가 쓸 수 있는 실제 이름인 `gemini-flash-latest`를 찾아내 적용.
- **뇌리 박기**: 외부 API 에러가 나면 "내가 틀렸나?"가 아니라 **"현재 사용 가능한 실제 목록"**을 직접 뽑아보는 습관을 가져야 합니다.

## 4. "작업 중간 이동은 Git Stash가 진리다"
- **도구**: Git CLI
- **상황**: 작업은 다 해놨는데 브랜치가 옛날 브랜치(`py_cij4`)였음.
- **해결**: `git stash` (작업물 보관) -> `main` 이동 및 `pull` -> 새 브랜치 생성 -> `git stash pop` (복구)
- **뇌리 박기**: "어떡하지?" 하고 코드를 복사본으로 남기지 마세요. **Git의 임시 저장 가방(stash)**을 믿고 환경을 먼저 최신으로 세팅한 뒤 짐을 푸는 게 정석입니다.

## 5. "터미널이 명령어를 모른다면 내 집(venv)인지 확인하라"
- **도구**: Bash / Terminal
- **상황**: 새 터미널에서 `uvicorn`이 없다고 나옴.
- **해결**: `source venv/Scripts/activate` (가상환경 활성화)
- **뇌리 박기**: 백엔드 서버 명령어는 전역(Global) 공간이 아니라 격리된 내 집(venv) 안에 살고 있습니다. 대문부터 먼저 여는 습관을 들이세요.
